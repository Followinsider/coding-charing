"use strict";(self["webpackChunkCoding_Charing"]=self["webpackChunkCoding_Charing"]||[]).push([[426],{6426:function(t,s,a){a.r(s),a.d(s,{default:function(){return h}});var e=function(){var t=this,s=t._self._c;return s("div",{staticClass:"editor"},[s("div",{staticClass:"info"},[s("div",{staticClass:"left"},[s("span",{staticClass:"icon_back",on:{click:t.goBack}},[s("i",{staticClass:"el-icon-arrow-left"})]),s("el-input",{staticClass:"title",attrs:{placeholder:"输入文章标题...",size:"middle",maxlength:"30","show-word-limit":""},model:{value:t.title,callback:function(s){t.title=s},expression:"title"}})],1),s("div",{staticClass:"right"},[s("div",{staticClass:"right_tag"},[s("span",[t._v("文章所属分类")]),s("el-select",{attrs:{placeholder:"请选择"},model:{value:t.tags,callback:function(s){t.tags=s},expression:"tags"}},t._l(t.ttags,(function(t){return s("el-option",{key:t.id,attrs:{value:t.name}})})),1)],1),s("div",{staticClass:"right_publish"},[s("el-button",{attrs:{plain:""},on:{click:t.toUser}},[t._v("草稿箱")]),s("el-button",{attrs:{type:"info"},on:{click:t.savaDrafts}},[t._v("保存草稿")]),s("el-button",{staticClass:"publish",attrs:{type:"primary"},on:{click:t.publish}},[t._v("发布")]),s("el-dropdown",{staticClass:"dropdown",on:{command:t.handleCommand}},[s("el-avatar",{staticClass:"avatar",attrs:{src:"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png"}}),s("el-dropdown-menu",{attrs:{slot:"dropdown"},slot:"dropdown"},[s("el-dropdown-item",{attrs:{icon:"el-icon-plus",command:"user"}},[t._v("我的主页")])],1)],1)],1)])]),s("mavon-editor",{attrs:{toolbars:t.toolbars},on:{change:t.change,save:t.save},model:{value:t.tblogbodyParam.content,callback:function(s){t.$set(t.tblogbodyParam,"content",s)},expression:"tblogbodyParam.content"}})],1)},o=[],l=(a(7658),a(1208)),i=a(3822),n={name:"Edit",components:{mavonEditor:l.mavonEditor},data(){return{tblogbodyParam:{content:"",contentHtml:""},toolbars:{bold:!0,italic:!0,header:!0,underline:!0,strikethrough:!0,mark:!0,superscript:!0,subscript:!0,quote:!0,ol:!0,ul:!0,link:!0,imagelink:!0,code:!0,table:!0,fullscreen:!0,readmodel:!0,htmlcode:!0,help:!0,undo:!0,redo:!0,trash:!0,save:!0,navigation:!0,alignleft:!0,aligncenter:!0,alignright:!0,preview:!0},title:"",tags:""}},methods:{toUser(){this.$router.push("user")},collectData(){let t={ttags:[]};return t.tblogbodyParam=this.tblogbodyParam,t.title=this.title,t.ttags=this.ttags.filter((t=>t.name==this.tags)),t.userId=this.userId,t},clearData(){this.tblogbodyParam.content="",this.contentHtml="",this.title="",this.tags=""},async publish(){let t=this.collectData();try{""!==t.tblogbodyParam.content&&t.title&&t.ttags.length>0&&t.userId?(await this.$store.dispatch("publish",t),this.$message.success("发布成功！"),this.clearData()):this.$message.error("请检查是否填写内容/标题/文章所属分类")}catch(s){console.log(s)}},change:_.debounce((function(t,s){this.tblogbodyParam.contentHtml=s}),800),save(t,s){this.tblogbodyParam.content=t,this.tblogbodyParam.contentHtml=s,this.$message.success("保存成功")},async savaDrafts(){let t=this.collectData();try{""!==t.tblogbodyParam.content&&t.title&&t.ttags.length>0&&t.userId?(await this.$store.dispatch("saveBlog",t),this.$message.success("保存草稿成功"),this.clearData()):this.$message.error("请检查是否填写内容/标题/文章所属分类")}catch(s){console.log(s)}},handleCommand(){this.$router.push("/home")},goBack(){""!==this.title||""!==this.tblogbodyParam.content?this.$message.info("离开之前请保存草稿"):this.$router.push("/")}},mounted(){this.$store.dispatch("getTag"),this.$store.dispatch("userInfo")},computed:{...(0,i.rn)({ttags:t=>t.article.tagList,userId:t=>t.user.userInfo.user.id})}},r=n,c=a(1001),d=(0,c.Z)(r,e,o,!1,null,"1f7dccee",null),h=d.exports}}]);
//# sourceMappingURL=426.87439087.js.map