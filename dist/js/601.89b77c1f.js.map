{"version":3,"file":"js/601.89b77c1f.js","mappings":"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","sources":["webpack://coding_charing/./src/pages/Edit/index.vue","webpack://coding_charing/src/pages/Edit/index.vue","webpack://coding_charing/./src/pages/Edit/index.vue?87a9","webpack://coding_charing/./src/pages/Edit/index.vue?dcbf"],"sourcesContent":["var render = function render(){var _vm=this,_c=_vm._self._c;return _c('div',{staticClass:\"editor\"},[_c('div',{staticClass:\"info\"},[_c('div',{staticClass:\"left\"},[_c('span',{staticClass:\"icon_back\",on:{\"click\":_vm.goBack}},[_c('i',{staticClass:\"el-icon-arrow-left\"})]),_c('el-input',{staticClass:\"title\",attrs:{\"placeholder\":\"输入文章标题...\",\"size\":\"middle\",\"maxlength\":\"30\",\"show-word-limit\":\"\"},model:{value:(_vm.title),callback:function ($$v) {_vm.title=$$v},expression:\"title\"}})],1),_c('div',{staticClass:\"right\"},[_c('div',{staticClass:\"right_tag\"},[_c('span',[_vm._v(\"文章所属分类\")]),_c('el-select',{attrs:{\"placeholder\":\"请选择\"},model:{value:(_vm.tags),callback:function ($$v) {_vm.tags=$$v},expression:\"tags\"}},_vm._l((_vm.ttags),function(item){return _c('el-option',{key:item.id,attrs:{\"value\":item.name}})}),1)],1),_c('div',{staticClass:\"right_publish\"},[_c('el-button',{attrs:{\"plain\":\"\"},on:{\"click\":_vm.toUser}},[_vm._v(\"草稿箱\")]),_c('el-button',{attrs:{\"type\":\"info\"},on:{\"click\":_vm.savaDrafts}},[_vm._v(\"保存草稿\")]),_c('el-button',{staticClass:\"publish\",attrs:{\"type\":\"primary\"},on:{\"click\":_vm.publish}},[_vm._v(\"发布\")]),_c('el-dropdown',{staticClass:\"dropdown\",on:{\"command\":_vm.handleCommand}},[_c('el-avatar',{staticClass:\"avatar\",attrs:{\"src\":\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\"}}),_c('el-dropdown-menu',{attrs:{\"slot\":\"dropdown\"},slot:\"dropdown\"},[_c('el-dropdown-item',{attrs:{\"icon\":\"el-icon-plus\",\"command\":\"user\"}},[_vm._v(\"我的主页\")])],1)],1)],1)])]),_c('mavon-editor',{attrs:{\"toolbars\":_vm.toolbars},on:{\"change\":_vm.change,\"save\":_vm.save},model:{value:(_vm.tblogbodyParam.content),callback:function ($$v) {_vm.$set(_vm.tblogbodyParam, \"content\", $$v)},expression:\"tblogbodyParam.content\"}})],1)\n}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n    <div class=\"editor\">\r\n        <div class=\"info\">\r\n            <div class=\"left\">\r\n                <span class=\"icon_back\" @click=\"goBack\"><i class=\"el-icon-arrow-left\"></i></span>\r\n                <el-input \r\n                    v-model=\"title\" \r\n                    placeholder=\"输入文章标题...\" \r\n                    class=\"title\" \r\n                    size=\"middle\"\r\n                    maxlength=\"30\"\r\n                    show-word-limit\r\n                >\r\n                </el-input>\r\n            </div>\r\n            \r\n            <div class=\"right\">\r\n                <div class=\"right_tag\">\r\n                    <span>文章所属分类</span>\r\n                    <el-select v-model=\"tags\" placeholder=\"请选择\">\r\n                        <el-option\r\n                        v-for=\"item in ttags\"\r\n                        :key=\"item.id\"\r\n                        :value=\"item.name\">\r\n                        </el-option>\r\n                    </el-select>\r\n                </div>\r\n                <div class=\"right_publish\">\r\n                    <el-button plain @click=\"toUser\">草稿箱</el-button>\r\n                    <el-button type=\"info\" @click=\"savaDrafts\">保存草稿</el-button>\r\n                    <el-button type=\"primary\" class=\"publish\" @click=\"publish\">发布</el-button>\r\n                    <el-dropdown @command=\"handleCommand\" class=\"dropdown\">\r\n                        <el-avatar src=\"https://cube.elemecdn.com/0/88/03b0d39583f48206768a7534e55bcpng.png\" class=\"avatar\"></el-avatar>\r\n                        <el-dropdown-menu slot=\"dropdown\">\r\n                            <el-dropdown-item icon=\"el-icon-plus\" command=\"user\">我的主页</el-dropdown-item>\r\n                        </el-dropdown-menu>\r\n                    </el-dropdown>\r\n                </div>\r\n            </div>\r\n        </div>\r\n        <mavon-editor v-model=\"tblogbodyParam.content\" :toolbars=\"toolbars\" @change=\"change\" @save=\"save\"></mavon-editor>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport {mavonEditor} from 'mavon-editor';\r\nimport {mapState} from 'vuex';\r\nexport default {\r\n    name: 'Edit',\r\n    components: {mavonEditor},\r\n    data() {\r\n        return {\r\n            tblogbodyParam: {\r\n                content: '',\r\n                contentHtml: '',\r\n            },\r\n            toolbars: {\r\n                bold: true, // 粗体\r\n                italic: true, // 斜体\r\n                header: true, // 标题\r\n                underline: true, // 下划线\r\n                strikethrough: true, // 中划线\r\n                mark: true, // 标记\r\n                superscript: true, // 上角标\r\n                subscript: true, // 下角标\r\n                quote: true, // 引用\r\n                ol: true, // 有序列表\r\n                ul: true, // 无序列表\r\n                link: true, // 链接\r\n                imagelink: true, // 图片链接\r\n                code: true, // code\r\n                table: true, // 表格\r\n                fullscreen: true, // 全屏编辑\r\n                readmodel: true, // 沉浸式阅读\r\n                htmlcode: true, // 展示html源码\r\n                help: true, // 帮助\r\n                /* 1.3.5 */\r\n                undo: true, // 上一步\r\n                redo: true, // 下一步\r\n                trash: true, // 清空\r\n                save: true, // 保存（触发events中的save事件）\r\n                /* 1.4.2 */\r\n                navigation: true, // 导航目录\r\n                /* 2.1.8 */\r\n                alignleft: true, // 左对齐\r\n                aligncenter: true, // 居中\r\n                alignright: true, // 右对齐\r\n                /* 2.2.1 */\r\n                // subfield: true, // 单双栏模式\r\n                preview: true, // 预览\r\n            },\r\n            title:'',\r\n            tags: '',\r\n        }\r\n    },\r\n    methods: {\r\n        toUser() {\r\n            this.$router.push('user')\r\n        },\r\n        collectData() {\r\n            let object = {};\r\n            object.ttags = [];\r\n            object.tblogbodyParam = this.tblogbodyParam;\r\n            object.title = this.title;\r\n            object.ttags = this.ttags.filter(item => item.name == this.tags);\r\n            object.userId = this.userId;\r\n            console.log(object);\r\n            return object;\r\n        },\r\n        clearData() {\r\n            this.tblogbodyParam.content = '';\r\n            this.contentHtml = '';\r\n            this.title = '';\r\n            this.tags = '';\r\n        },\r\n        async publish() {\r\n            let object = this.collectData();\r\n            try {\r\n                if (object.tblogbodyParam.content !== '' && object.title && object.ttags.length > 0 && object.userId) {\r\n                    await this.$store.dispatch('publish',object);\r\n                    this.$message.success('发布成功！');\r\n                    this.clearData();\r\n                }else {\r\n                    this.$message.error('请检查是否填写内容/标题/文章所属分类');\r\n                }\r\n            }catch(error) {\r\n                console.log(error)\r\n            }\r\n        },\r\n\r\n        change: _.debounce(function(value, render) {\r\n            this.tblogbodyParam.contentHtml = render;\r\n        },800),\r\n\r\n        save(value,render) {\r\n            this.tblogbodyParam.content = value;\r\n            this.tblogbodyParam.contentHtml = render;\r\n            this.$message.success('保存成功');\r\n        },\r\n\r\n        async savaDrafts() {\r\n            let object = this.collectData();\r\n            try {\r\n                if (object.tblogbodyParam.content !== '' && object.title && object.ttags.length > 0 && object.userId) {\r\n                    await this.$store.dispatch('saveBlog',object);\r\n                    this.$message.success('保存草稿成功');\r\n                    this.clearData();\r\n                }else {\r\n                    this.$message.error('请检查是否填写内容/标题/文章所属分类');\r\n                }\r\n            }catch(error) {\r\n                console.log(error)\r\n            }\r\n        },\r\n\r\n        handleCommand() {\r\n            this.$router.push('/home');\r\n        },\r\n        \r\n        goBack() {\r\n            if (this.title !== '' || this.tblogbodyParam.content !== '') {\r\n                this.$message.info('离开之前请保存草稿')\r\n            }else {\r\n                this.$router.push('/')\r\n            }\r\n        }\r\n    },\r\n    mounted() {\r\n        this.$store.dispatch('getTag')\r\n        this.$store.dispatch('userInfo')\r\n    },\r\n    computed: {\r\n        ...mapState({\r\n            ttags: state => state.article.tagList,\r\n            userId: state => state.user.userInfo.user.id\r\n        }),\r\n    }\r\n}\r\n</script>\r\n\r\n<style scoped>\r\n@import url('mavon-editor/dist/css/index.css');\r\n.publish {\r\n    margin-right: 14px;\r\n}\r\n.info {\r\n    height: 80px;\r\n    line-height: 45px;\r\n    display: flex;\r\n    justify-content: space-between;\r\n}\r\n.left {\r\n    width: 40%;\r\n    line-height: 80px;\r\n    display: flex;\r\n}\r\n.right {\r\n    width: 60%;\r\n    display: flex;\r\n    justify-content: space-around;\r\n    margin-left: 12px;\r\n    line-height: 80px;\r\n}\r\n.right_tag {\r\n    flex: 2 1 auto;\r\n}\r\n.right_publish {\r\n    flex: 1 1 auto;\r\n    display: flex;\r\n    align-items: center;\r\n}\r\nbutton:focus {\r\n    outline: 0;\r\n}\r\n.avatar {\r\n\tmargin-left: 12px;\r\n    align-items: center;\r\n}\r\n.dropdown {\r\n    display: flex;\r\n}\r\n.icon_back {\r\n    font-size: 25px;\r\n    margin-right: 20px;\r\n}\r\n.icon_back:hover {\r\n    cursor: pointer;\r\n}\r\n</style>","import mod from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../../node_modules/thread-loader/dist/cjs.js!../../../node_modules/babel-loader/lib/index.js??clonedRuleSet-40.use[1]!../../../node_modules/@vue/vue-loader-v15/lib/index.js??vue-loader-options!./index.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./index.vue?vue&type=template&id=0e9fb58e&scoped=true&\"\nimport script from \"./index.vue?vue&type=script&lang=js&\"\nexport * from \"./index.vue?vue&type=script&lang=js&\"\nimport style0 from \"./index.vue?vue&type=style&index=0&id=0e9fb58e&prod&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../../node_modules/@vue/vue-loader-v15/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"0e9fb58e\",\n  null\n  \n)\n\nexport default component.exports"],"names":["render","_vm","this","_c","_self","staticClass","on","goBack","attrs","model","value","title","callback","$$v","expression","_v","tags","_l","ttags","item","key","id","name","toUser","savaDrafts","publish","handleCommand","slot","toolbars","change","save","tblogbodyParam","content","$set","staticRenderFns","components","mavonEditor","data","contentHtml","bold","italic","header","underline","strikethrough","mark","superscript","subscript","quote","ol","ul","link","imagelink","code","table","fullscreen","readmodel","htmlcode","help","undo","redo","trash","navigation","alignleft","aligncenter","alignright","preview","methods","collectData","object","console","clearData","mounted","computed","userId","component"],"sourceRoot":""}